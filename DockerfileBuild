FROM golang:alpine3.13

RUN apk add git

ADD build/ /opt/sunnylog

COPY sunnylog.go /opt/sunnylog/sunnylog.go

RUN su -c "cd /opt/sunnylog && go mod init sunnylog && go mod tidy && go get"

RUN su -c "cd /opt/sunnylog && go build"

ENTRYPOINT [ "sunnylog" ]